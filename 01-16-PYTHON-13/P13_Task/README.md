# Финальное задание модуля PYTHON-13 #

## Анализ данных об оттоке клиентов некоторого банка ##

### Содержание ###

[1. Условия задания](#условия-задания)    
[2. Описание столбцов таблицы](#столбцы-таблицы)    
[3. Задания](#задания)    
[4. Файлы решения](#файлы-решения)    

### Условия задания ###

- Нужно установить, чем ушедшие клиенты отличаются от лояльных и как между собой связаны различные признаки, определяющие клиентов.
- Подготовить мини-отчёт о проделанной работе в виде ноутбука. Отчёт должен содержать ответы на приведённые ниже вопросы в виде графика и подробных выводов, которые можно сделать, исходя из него.
- В файле должно содержаться 10 графиков&nbsp;&mdash; 10 ответов к заданиям.
- Каждый график и преобразования к нему выполняются в отдельной ячейке.
- Под графиком надо предоставить ответ на вопрос по нему и, если это требуется, выводы, которые можно сделать, исходя из графика.

[:arrow_up: Содержание](#содержание)

----

### Столбцы таблицы ###

1. **`RowNumber`**&nbsp;&mdash; номер строки таблицы (это лишняя информация, поэтому можно сразу от неё избавиться)
2. **`CustomerId`**&nbsp;&mdash; идентификатор клиента
3. **`Surname`**&nbsp;&mdash; фамилия клиента
4. **`CreditScore`**&nbsp;&mdash; кредитный рейтинг клиента (чем он выше, тем больше клиент брал кредитов и возвращал их)
5. **`Geography`**&nbsp;&mdash; страна клиента (банк международный)
6. **`Gender`**&nbsp;&mdash; пол клиента
7. **`Age`**&nbsp;&mdash; возраст клиента
8. **`Tenure`**&nbsp;&mdash; сколько лет клиент пользуется услугами банка
9. **`Balance`**&nbsp;&mdash; баланс на счетах клиента в банке
10. **`NumOfProducts`**&nbsp;&mdash; количество услуг банка, которые приобрёл клиент
11. **`HasCrCard`**&nbsp;&mdash; есть ли у клиента кредитная карта (**1**&nbsp;&mdash; да, **0**&nbsp;&mdash; нет)
12. **`IsActiveMember`**&nbsp;&mdash; есть ли у клиента статус активного клиента банка (**1**&nbsp;&mdash; да, **0**&nbsp;&mdash; нет)
13. **`EstimatedSalary`**&nbsp;&mdash; предполагаемая заработная плата клиента
14. **`Exited`**&nbsp;&mdash; статус лояльности (**1**&nbsp;&mdash; ушедший клиент, **0**&nbsp;&mdash; лояльный клиент)

[:arrow_up: Содержание](#содержание)

----

### Задания ###

1. Каково соотношение ушедших и лояльных клиентов? Показать это на графике и **дать комментарий по соотношению**.
2. Построить график, показывающий распределение баланса пользователей, у которых на счету больше 2500 долларов. **Описать распределение и сделать выводы.**
3. Посмотреть на распределение баланса клиента в разрезе признака оттока. Как различаются суммы на накопительном счёте ушедших и лояльных клиентов? **Подумать и написать, с чем это может быть связано, что может не устраивать ушедших клиентов в банке.**
4. Посмотреть на распределение возраста в разрезе признака оттока. **В какой группе больше потенциальных выбросов? На какую возрастную категорию клиентов стоит обратить внимание банку?**
5. Построить график, который показывает взаимосвязь кредитного рейтинга клиента и его предполагаемой зарплаты. Добавить расцветку по признаку оттока клиентов. **Какова взаимосвязь между признаками? Если не видно явной взаимосвязи, указать это.**
6. Кто чаще уходит, мужчины или женщины? Построить график, который иллюстрирует это.    
    ***Подсказка***    
    Процент ушедших клиентов в каждой группе можно рассчитать как среднее по столбцу `Exited` (так как **1**&nbsp;&mdash; это ушедшие клиенты, а **0**&nbsp;&mdash; лояльные, среднее арифметическое по столбцу обозначает долю ушедших клиентов).
7. Как отток клиентов зависит от числа приобретённых у банка услуг? Для ответа на этот вопрос построить многоуровневую столбчатую диаграмму.
8. Как влияет наличие статуса активного клиента на отток клиентов? Построить диаграмму, иллюстрирующую это. **Что предложить банку, чтобы уменьшить отток клиентов среди неактивных?**
9. В какой стране доля ушедших клиентов больше? Построить тепловую картограмму, которая покажет это соотношение на карте мира. **Предположить, с чем это может быть связано.**
10. Перевести числовой признак `CreditScore` в категориальный. Для этого воспользоваться функцией `get_credit_score_cat()`, которая приведена ниже. Применить её к столбцу `CreditScore` и создать новый признак `CreditScoreCat`&nbsp;&mdash; категории кредитного рейтинга.

    ```python
    def get_credit_score_cat(credit_score):
        if credit_score >= 300 and credit_score < 500:
            return "Very_Poor"
        elif credit_score >= 500 and credit_score < 601:
            return "Poor"
        elif credit_score >= 601 and credit_score < 661:
            return "Fair"
        elif credit_score >= 661 and credit_score < 781:
            return "Good"
        elif credit_score >= 781 and credit_score < 851:
            return "Excellent"
        elif credit_score >= 851:
            return "Top"
        elif credit_score < 300:
            return "Deep"
    ```

    Построить сводную таблицу, строками которой являются категории кредитного рейтинга (`CreditScoreCat`), а столбцами&nbsp;&mdash; количество лет, в течение которых клиент пользуется услугами банка (`Tenure`). В ячейках сводной таблицы должно находиться среднее по признаку оттока (`Exited`)&nbsp;&mdash; доля ушедших пользователей.    
    На основе полученной сводной таблицы построить тепловую карту с аннотацией. Найти на тепловой карте категории клиентов, которые уходят чаще всего.

[:arrow_up: Содержание](#содержание)

----

### Файлы решения ###

1. [Итоговый файл Jupyter Notebook](P13_Task.ipynb)

2. [Файл-датасет с исходными данными](churn.csv)

3. График задания 9.9 создан в `Plotly` и не отображается в файлах Jupyter
Notebook. Поэтому его можно отдельно
[просмотреть в браузере по ссылке](https://ssszone.ru/DataScience/p13/plot99.html)

[:arrow_up: Содержание](#содержание)

----
